<!doctype html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Profile â€” VSXchangeZA</title>
  <meta name="color-scheme" content="dark light" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <!-- Dashboard core styles + profile tweaks -->
  <link rel="stylesheet" href="./dashboard.css" />
  <link rel="stylesheet" href="./profile.css" />
</head>
<body>
  <!-- appbar kept identical to dashboard for consistency -->
  <header class="appbar" role="banner">
    <div class="appbar-row container">
      <a class="brand" href="./index.html" aria-label="VSXchangeZA home">VSXchangeZA</a>
      <nav class="topnav" aria-label="Primary">
        <a href="./dashboard.html">Home</a>
        <a href="./explore.html">Explore</a>
        <a href="./profile.html" class="active">Profile</a>
        <a href="./settings.html">Settings</a>
        <button id="logout" class="btn ghost" title="Logout">Logout</button>
      </nav>
    </div>
  </header>

  <main class="container profile-layout" id="main">
    <!-- left: profile card -->
    <section class="card profile-card" id="profileCard" aria-label="Profile">
      <div class="profile-hero">
        <div class="avatar big" id="pAvatar">ðŸ‘¤</div>
        <div class="profile-meta">
          <h1 id="pName">User</h1>
          <div class="muted" id="pRole">Role</div>
          <div class="muted small" id="pLocation">Location</div>
        </div>
      </div>

      <div class="profile-stats">
        <div class="stat-item"><strong id="pExperience">â€”</strong><small>Years</small></div>
        <div class="stat-item"><strong id="pRating">â€”</strong><small>Rating</small></div>
        <div class="stat-item"><strong id="pCustomers">â€”</strong><small>Customers</small></div>
      </div>

      <div class="profile-actions">
        <button id="editProfile" class="btn primary">Edit profile</button>
        <button id="msgProfile" class="btn ghost">Message</button>
        <button id="callProfile" class="btn ghost">Call</button>
      </div>
    </section>

    <!-- center: editable form -->
    <section class="card profile-form" aria-label="Edit profile">
      <h2>Profile & Portfolio</h2>
      <form id="profileForm" novalidate>
        <div class="row two">
          <label>First name
            <input id="firstName" name="firstName" type="text" required />
          </label>
          <label>Last name
            <input id="lastName" name="lastName" type="text" required />
          </label>
        </div>

        <div class="row two">
          <label>Role
            <select id="role" name="role" required>
              <option value="">Select role</option>
              <option value="client">Client</option>
              <option value="farmer">Farmer</option>
              <option value="skilled">Skilled</option>
            </select>
          </label>

          <label>Location
            <input id="location" name="location" placeholder="City, Province" />
          </label>
        </div>

        <div class="row">
          <label>Profile Bio
            <textarea id="bio" rows="4" placeholder="Describe your skills, services, availability..."></textarea>
          </label>
        </div>

        <div class="row two">
          <label>Hourly rate (optional)
            <input id="rate" type="number" min="0" step="0.01" placeholder="R / hour" />
          </label>
          <label>Availability
            <input id="availability" placeholder="e.g. Weekdays 09:00-15:00" />
          </label>
        </div>

        <div class="row">
          <label>Skills (press Enter to add)
            <div id="skillsInput" class="tags-input">
              <input id="skillText" placeholder="Add a skill and press Enter" />
            </div>
          </label>
        </div>

        <div class="row">
          <label>Portfolio (paste image/video URL or external link)
            <div id="portfolioList" class="portfolio-list"></div>
            <div class="portfolio-add">
              <input id="portfolioUrl" placeholder="https://example.com/image.jpg or video link" />
              <button id="addPortfolio" class="btn ghost" type="button">Add</button>
            </div>
          </label>
        </div>

        <div class="row">
          <label>Avatar URL
            <input id="avatarUrl" placeholder="https://example.com/avatar.jpg" />
          </label>
        </div>

        <div id="profileMsg" class="muted small"></div>
        <div class="actions">
          <button id="saveProfile" class="btn primary" type="submit">Save profile</button>
          <button id="cancelProfile" class="btn ghost" type="button">Reset</button>
        </div>
      </form>
    </section>

    <!-- right: analytics & searchability -->
    <aside class="card profile-right" aria-label="Profile highlights">
      <h3>Search & Visibility</h3>
      <p class="muted small">Set your location and skills to be discoverable on Explore and nearby searches.</p>

      <div style="margin-top:12px;">
        <label class="muted small">Discoverability:</label>
        <div style="display:flex;gap:8px;margin-top:8px;">
          <button id="toggleDiscover" class="btn ghost">Toggle</button>
          <div id="discoverState" class="muted">Unknown</div>
        </div>
      </div>

      <h4 style="margin-top:18px;">Portfolio Preview</h4>
      <div id="portfolioPreview" class="portfolio-preview muted">No items yet</div>
    </aside>
  </main>

  <script src="./api.js"></script>
  <script src="./auth.js"></script>
  <script src="./helpers.js"></script>
  <script src="./profile.js" type="module"></script>
</body>
</html>